<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>VideoHub 3.0 - Your Personal YouTube Dashboard</title>
<style>
  body {
    margin: 0; background: #121212; color: #eee;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    overflow: hidden;
  }
  a, button {
    font-family: inherit;
  }
  button {
    cursor: pointer;
  }
  .app {
    display: flex; height: 100vh; width: 100vw;
  }
  aside.sidebar {
    background: #181818;
    width: 250px;
    display: flex;
    flex-direction: column;
    border-right: 2px solid #ff3c00;
    overflow-y: auto;
    padding: 20px;
  }
  main.content {
    flex-grow: 1;
    background: #1e1e1e;
    display: flex;
    flex-direction: column;
    overflow-y: auto;
  }
  header.header {
    height: 60px;
    background: #222;
    color: #ff3c00;
    display: flex;
    align-items: center;
    padding: 0 20px;
    font-weight: 700;
    font-size: 1.5rem;
    border-bottom: 2px solid #ff3c00;
  }
  .sidebar h2 {
    margin: 0 0 20px 0;
    font-weight: 700;
    color: #ff3c00;
    user-select: none;
    font-size: 1.4rem;
    text-align: center;
  }
  nav.menu {
    flex-grow: 1;
  }
  nav.menu button {
    width: 100%;
    background: transparent;
    border: none;
    padding: 12px 15px;
    color: #ccc;
    text-align: left;
    font-weight: 600;
    border-radius: 8px;
    margin-bottom: 8px;
    transition: background-color 0.3s ease;
  }
  nav.menu button:hover {
    background-color: #ff3c00;
    color: #121212;
  }
  nav.menu button.active {
    background-color: #ff3c00;
    color: #121212;
    font-weight: 900;
  }
  .search-box {
    margin-bottom: 20px;
  }
  .search-box input[type="search"] {
    width: 100%;
    padding: 10px 15px;
    border-radius: 10px;
    border: none;
    font-size: 1rem;
    outline: none;
    transition: background-color 0.3s ease;
  }
  .search-box input[type="search"]:focus {
    background-color: #333;
    color: #fff;
  }
  .videos-container {
    padding: 20px;
    flex-grow: 1;
    overflow-y: auto;
  }
  .videos-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill,minmax(320px,1fr));
    gap: 18px;
  }
  .video-card {
    background: #272727;
    border-radius: 12px;
    box-shadow: 0 0 10px #ff3c00cc;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    transition: transform 0.3s ease;
  }
  .video-card:hover {
    transform: scale(1.03);
    box-shadow: 0 0 14px #ff3c00ee;
  }
  .video-thumb {
    position: relative;
    width: 100%;
    height: 180px;
  }
  .video-thumb iframe {
    width: 100%;
    height: 180px;
    border: none;
  }
  .video-info {
    padding: 10px 15px;
    color: #eee;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
  }
  .video-title {
    font-weight: 700;
    font-size: 1.1rem;
    margin-bottom: 8px;
    user-select: text;
  }
  .video-actions {
    margin-top: auto;
    display: flex;
    gap: 12px;
  }
  button.action-btn {
    background: #ff3c00;
    border: none;
    border-radius: 8px;
    padding: 8px 12px;
    color: #121212;
    font-weight: 700;
    flex-grow: 1;
    transition: background-color 0.3s ease;
  }
  button.action-btn:hover {
    background-color: #e63600;
  }
  button.like-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    background: transparent;
    border: none;
    color: #ff3c00;
    font-weight: 700;
    cursor: pointer;
    user-select: none;
    transition: color 0.3s ease;
  }
  button.like-btn.liked {
    color: #ff6161;
  }
  button.like-btn:hover {
    color: #ff7f7f;
  }
  .upload-section {
    margin: 0 20px 20px 20px;
    padding: 15px;
    background: #222;
    border-radius: 12px;
    box-shadow: 0 0 10px #ff3c00bb;
  }
  .upload-section label {
    display: block;
    margin-bottom: 6px;
    font-weight: 700;
  }
  .upload-section input[type="url"] {
    width: 100%;
    padding: 8px 12px;
    border-radius: 8px;
    border: none;
    font-size: 1rem;
    outline: none;
  }
  .upload-section button {
    margin-top: 10px;
    width: 100%;
    background: #ff3c00;
    border: none;
    border-radius: 10px;
    color: #121212;
    font-weight: 700;
    padding: 10px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  .upload-section button:hover {
    background-color: #e63600;
  }
  @media (max-width: 768px) {
    .app {
      flex-direction: column;
    }
    aside.sidebar {
      width: 100%;
      height: auto;
      border-right: none;
      border-bottom: 2px solid #ff3c00;
      padding: 10px;
      flex-direction: row;
      overflow-x: auto;
      gap: 10px;
    }
    nav.menu button {
      flex-shrink: 0;
      padding: 10px 15px;
      font-size: 0.9rem;
    }
    main.content {
      height: auto;
      flex-grow: 1;
      overflow-y: visible;
    }
    .videos-grid {
      grid-template-columns: repeat(auto-fill,minmax(280px,1fr));
      gap: 12px;
    }
  }
</style>
</head>
<body>

<div class="app">

  <aside class="sidebar">
    <h2>VideoHub</h2>

    <div class="search-box">
      <input type="search" id="searchInput" placeholder="Search videos..." autocomplete="off" />
    </div>

    <nav class="menu" aria-label="Main navigation">
      <button class="menu-btn active" data-tab="home">Home</button>
      <button class="menu-btn" data-tab="trending">Trending</button>
      <button class="menu-btn" data-tab="music">Music</button>
      <button class="menu-btn" data-tab="gaming">Gaming</button>
      <button class="menu-btn" data-tab="education">Education</button>
      <button class="menu-btn" data-tab="entertainment">Entertainment</button>
      <button class="menu-btn" data-tab="favorites">Favorites</button>
      <button class="menu-btn" data-tab="uploads">My Uploads</button>
    </nav>
  </aside>

  <main class="content" role="main">
    <header class="header">VideoHub ðŸŽ¥</header>
    <section class="videos-container" id="videosContainer">
      <div class="videos-grid" id="videosGrid">
        <!-- Videos will load here -->
      </div>
    </section>
    <section class="upload-section" aria-label="Upload new video">
      <label for="videoURLInput">Add YouTube Video URL</label>
      <input type="url" id="videoURLInput" placeholder="https://www.youtube.com/watch?v=..." />
      <button id="uploadVideoBtn">Add Video</button>
    </section>
  </main>

</div>

<script>
  // ===== Constants =====
  const tabsButtons = document.querySelectorAll('.menu-btn');
  const videosGrid = document.getElementById('videosGrid');
  const searchInput = document.getElementById('searchInput');
  const videoURLInput = document.getElementById('videoURLInput');
  const uploadVideoBtn = document.getElementById('uploadVideoBtn');

  // LocalStorage keys
  const LS_KEYS = {
    USER_VIDEOS: 'vh_userVideos',
    FAVORITES: 'vh_favorites',
    LIKES: 'vh_likes',
  };

  // Default videos dataset
  const defaultVideos = [
    { id: "dQw4w9WgXcQ", category: "music", title: "Rick Astley - Never Gonna Give You Up" },
    { id: "noLL5xy0UnU", category: "gaming", title: "Minecraft Hardcore Mode" },
    { id: "6zp3mt5Dd2c", category: "education", title: "Learn JavaScript in 10 Minutes" },
    { id: "MsXdUtlDVhk", category: "entertainment", title: "Funny Cats Compilation" },
    { id: "tAGnKpE4NCI", category: "music", title: "Ed Sheeran - Shape of You" },
    { id: "3JZ_D3ELwOQ", category: "music", title: "Mark Ronson - Uptown Funk" },
    { id: "Zi_XLOBDo_Y", category: "gaming", title: "Top 10 Fortnite Plays" },
    { id: "V-_O7nl0Ii0", category: "entertainment", title: "Best Movie Trailers 2023" }
  ];

  // Data holders
  let userVideos = [];
  let favorites = [];
  let likes = {};
  let currentTab = 'home';
  let searchTerm = '';

  // Load localStorage data
  function loadData() {
    userVideos = JSON.parse(localStorage.getItem(LS_KEYS.USER_VIDEOS)) || [];
    favorites = JSON.parse(localStorage.getItem(LS_KEYS.FAVORITES)) || [];
    likes = JSON.parse(localStorage.getItem(LS_KEYS.LIKES)) || {};
  }
  // Save functions
  function saveUserVideos() {
    localStorage.setItem(LS_KEYS.USER_VIDEOS, JSON.stringify(userVideos));
  }
  function saveFavorites() {
    localStorage.setItem(LS_KEYS.FAVORITES, JSON.stringify(favorites));
  }
  function saveLikes() {
    localStorage.setItem(LS_KEYS.LIKES, JSON.stringify(likes));
  }

  // Generate thumbnail URL from video id
  function getThumbnailUrl(id) {
    return `https://img.youtube.com/vi/${id}/hqdefault.jpg`;
  }

  // Render videos depending on current tab and search
  function renderVideos() {
    let videosToShow = [];

    // Combine default + user videos
    let allVideos = [...defaultVideos, ...userVideos];

    // Filter by category (tab)
    if (currentTab === 'home') {
      videosToShow = allVideos;
    } else if (currentTab === 'favorites') {
      videosToShow = allVideos.filter(v => favorites.includes(v.id));
    } else if (currentTab === 'uploads') {
      videosToShow = userVideos;
    } else {
      videosToShow = allVideos.filter(v => v.category === currentTab);
    }

    // Filter by search term (case insensitive substring match)
    if (searchTerm.trim() !== '') {
      videosToShow = videosToShow.filter(v => v.title.toLowerCase().includes(searchTerm.toLowerCase()));
    }

    videosGrid.innerHTML = '';

    if (videosToShow.length === 0) {
      videosGrid.innerHTML = `<p style="color:#ff3c00; font-weight:bold; grid-column:1/-1; text-align:center;">No videos found.</p>`;
      return;
    }

    videosToShow.forEach(video => {
      const card = document.createElement('div');
      card.className = 'video-card';

      const thumb = document.createElement('div');
      thumb.className = 'video-thumb';
      thumb.innerHTML = `
        <iframe 
          src="https://www.youtube.com/embed/${video.id}" 
          title="${video.title}"
          allowfullscreen
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
        ></iframe>
      `;

      const info = document.createElement('div');
      info.className = 'video-info';

      const title = document.createElement('div');
      title.className = 'video-title';
      title.textContent = video.title;

      const actions = document.createElement('div');
      actions.className = 'video-actions';

      // Like button
      const likeBtn = document.createElement('button');
      likeBtn.className = 'like-btn';
      if (likes[video.id]) {
        likeBtn.classList.add('liked');
      }
      likeBtn.innerHTML = `&#10084; ${likes[video.id] ? 1 : 0}`;
      likeBtn.title = 'Like';
      likeBtn.addEventListener('click', () => {
        if (likes[video.id]) {
          delete likes[video.id];
        } else {
          likes[video.id] = 1;
        }
        saveLikes();
        renderVideos();
      });

      // Favorite button
      const favBtn = document.createElement('button');
      favBtn.className = 'action-btn';
      if (favorites.includes(video.id)) {
        favBtn.textContent = 'Remove Favorite';
      } else {
        favBtn.textContent = 'Add Favorite';
      }
      favBtn.addEventListener('click', () => {
        if (favorites.includes(video.id)) {
          favorites = favorites.filter(id => id !== video.id);
        } else {
          favorites.push(video.id);
        }
        saveFavorites();
        renderVideos();
      });

      actions.appendChild(likeBtn);
      actions.appendChild(favBtn);

      info.appendChild(title);
      info.appendChild(actions);

      card.appendChild(thumb);
      card.appendChild(info);

      videosGrid.appendChild(card);
    });
  }

  // Add new video by URL
  async function addVideoByURL() {
    const url = videoURLInput.value.trim();
    if (!url) {
      alert('Please enter a YouTube video URL.');
      return;
    }
    // Extract ID
    const idMatch = url.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([\w-]{11})/);
    if (!idMatch) {
      alert('Invalid YouTube URL.');
      return;
    }
    const videoId = idMatch[1];
    // Check if video already added by user
    if (userVideos.find(v => v.id === videoId) || defaultVideos.find(v => v.id === videoId)) {
      alert('Video already exists.');
      videoURLInput.value = '';
      return;
    }
    // Fetch title via oEmbed API
    try {
      const res = await fetch(`https://www.youtube.com/oembed?url=https://www.youtube.com/watch?v=${videoId}&format=json`);
      if (!res.ok) throw new Error('Video not found');
      const data = await res.json();
      // Save user video with category "uploads"
      userVideos.push({ id: videoId, title: data.title, category: 'uploads' });
      saveUserVideos();
      videoURLInput.value = '';
      // If current tab is uploads or home, re-render to show new video
      if (currentTab === 'uploads' || currentTab === 'home') {
        renderVideos();
      }
      alert('Video added successfully!');
    } catch (error) {
      alert('Could not fetch video info. Please check the URL.');
    }
  }

  // Event Listeners

  // Tabs buttons click
  tabsButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      tabsButtons.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      currentTab = btn.dataset.tab;
      renderVideos();
    });
  });

  // Search input (live search)
  searchInput.addEventListener('input', e => {
    searchTerm = e.target.value;
    renderVideos();
  });

  // Upload button
  uploadVideoBtn.addEventListener('click', addVideoByURL);

  // Initialization
  function init() {
    loadData();
    renderVideos();
  }
  init();
</script>

</body>
</html>
