<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>VideoHub - Watch & Earn VVC</title>
<style>
  /* Reset b√°sico */
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #121212;
    color: #eee;
    cursor: url('https://cdn-icons-png.flaticon.com/512/616/616408.png'), auto; /* espada cursor */
  }
  header {
    background: #1f1f1f;
    padding: 15px 20px;
    font-size: 1.5rem;
    font-weight: bold;
    text-align: center;
    border-bottom: 2px solid #ff3c00;
  }
  .container {
    display: flex;
    height: calc(100vh - 60px);
  }
  nav.sidebar {
    width: 220px;
    background: #222;
    display: flex;
    flex-direction: column;
    padding: 20px;
  }
  nav.sidebar h2 {
    font-size: 1.3rem;
    margin-bottom: 20px;
    color: #ff3c00;
    user-select: none;
  }
  nav.sidebar button.tab-btn {
    background: #333;
    border: none;
    border-radius: 6px;
    color: #ccc;
    padding: 12px 10px;
    margin-bottom: 10px;
    cursor: pointer;
    font-weight: 600;
    transition: background-color 0.3s ease;
    text-align: left;
  }
  nav.sidebar button.tab-btn.active {
    background: #ff3c00;
    color: #121212;
    font-weight: bold;
  }
  nav.sidebar .upload-section {
    margin-top: 30px;
  }
  nav.sidebar label {
    display: block;
    margin-bottom: 6px;
    font-size: 0.9rem;
    user-select: none;
  }
  nav.sidebar input[type="url"] {
    padding: 8px;
    border-radius: 6px;
    border: none;
    font-size: 1rem;
    width: 100%;
    margin-bottom: 10px;
  }
  nav.sidebar button#uploadBtn {
    padding: 10px;
    background: #ff3c00;
    border: none;
    border-radius: 6px;
    color: white;
    font-weight: bold;
    cursor: pointer;
    transition: background 0.3s ease;
    width: 100%;
  }
  nav.sidebar button#uploadBtn:hover {
    background: #e63600;
  }
  main.content {
    flex-grow: 1;
    padding: 20px;
    overflow-y: auto;
    background: #181818;
    display: flex;
    flex-direction: column;
  }
  .videos-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill,minmax(320px,1fr));
    gap: 18px;
  }
  .video-card {
    background: #272727;
    border-radius: 10px;
    padding: 10px;
    box-shadow: 0 0 8px #ff3c00cc;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  iframe {
    border-radius: 8px;
    width: 100%;
    height: 180px;
  }
  button.btn-watch-enabled {
    margin-top: 12px;
    padding: 10px 14px;
    font-weight: bold;
    background-color: #ff3c00;
    border: none;
    border-radius: 6px;
    color: #fff;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  button.btn-watch-enabled:hover {
    background-color: #e63600;
  }
  button.btn-watch-disabled,
  button.btn-watch-done {
    margin-top: 12px;
    padding: 10px 14px;
    font-weight: bold;
    background-color: #555;
    border: none;
    border-radius: 6px;
    color: #ccc;
    cursor: not-allowed;
  }
  /* Scrollbar styling */
  main.content::-webkit-scrollbar {
    width: 10px;
  }
  main.content::-webkit-scrollbar-track {
    background: #222;
  }
  main.content::-webkit-scrollbar-thumb {
    background-color: #ff3c00;
    border-radius: 10px;
  }
  /* Pagination */
  .pagination {
    margin-top: 20px;
    display: flex;
    justify-content: center;
    gap: 8px;
    user-select: none;
  }
  .pagination button {
    background: #333;
    border: none;
    color: #ccc;
    padding: 8px 14px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
    transition: background-color 0.3s ease;
  }
  .pagination button:hover:not(.active) {
    background: #ff3c00;
    color: #121212;
  }
  .pagination button.active {
    background: #ff3c00;
    color: #121212;
    cursor: default;
  }

  /* Responsive */
  @media (max-width: 768px) {
    .container {
      flex-direction: column;
    }
    nav.sidebar {
      width: 100%;
      flex-direction: row;
      overflow-x: auto;
      padding: 10px;
      gap: 10px;
    }
    nav.sidebar > * {
      margin-right: 20px;
      flex-shrink: 0;
    }
    main.content {
      height: auto;
    }
    .videos-grid {
      grid-template-columns: repeat(auto-fill,minmax(280px,1fr));
    }
  }
</style>
</head>
<body>
<header>VideoHub üé•</header>
<div class="container">
  <nav class="sidebar">
    <h2>Categories</h2>
    <button class="tab-btn active" data-tab="all">Todos</button>
    <button class="tab-btn" data-tab="uploads">Uploads</button>
    <button class="tab-btn" data-tab="favorites">Favoritos</button>
    <button class="tab-btn" data-tab="extras">Extras</button>

    <div class="upload-section">
      <label for="videoURL">Upload YouTube Video ‚¨ÜÔ∏è</label>
      <input type="url" id="videoURL" placeholder="https://www.youtube.com/watch?v=..." />
      <button id="uploadBtn">Upload</button>
    </div>
  </nav>
  <main class="content">
    <div class="videos-grid" id="videosGrid"></div>
    <div class="pagination" id="pagination"></div>
  </main>
</div>

<script>
  // ======== Variables ========
  const videosGrid = document.getElementById('videosGrid');
  const videoURLInput = document.getElementById('videoURL');
  const uploadBtn = document.getElementById('uploadBtn');
  const pagination = document.getElementById('pagination');
  const tabs = document.querySelectorAll('nav.sidebar button.tab-btn');

  const VIDEOS_PER_PAGE = 6;
  let currentPage = 1;
  let currentTab = 'all';

  // Default videos (sem t√≠tulos vis√≠veis)
  const defaultVideos = [
    { id: "dQw4w9WgXcQ" },
    { id: "noLL5xy0UnU" },
    { id: "6zp3mt5Dd2c" },
    { id: "MsXdUtlDVhk" },
    { id: "tAGnKpE4NCI" }, // Adicionei mais alguns
    { id: "3JZ_D3ELwOQ" },
    { id: "Zi_XLOBDo_Y" },
    { id: "V-_O7nl0Ii0" }
  ];

  // Fun√ß√µes para salvar e carregar v√≠deos do usu√°rio
  function loadUserVideos() {
    return JSON.parse(localStorage.getItem('userVideos') || '[]');
  }
  function saveUserVideos(videos) {
    localStorage.setItem('userVideos', JSON.stringify(videos));
  }

  // Combine todos os v√≠deos de acordo com a aba selecionada
  function getFilteredVideos() {
    const userVideos = loadUserVideos();

    switch (currentTab) {
      case 'uploads':
        return userVideos;
      case 'favorites':
        // Implementar se quiser favoritar videos futuramente
        return [];
      case 'extras':
        // Voc√™ pode adicionar v√≠deos extras aqui ou outro conte√∫do
        return [];
      case 'all':
      default:
        return [...defaultVideos, ...userVideos];
    }
  }

  // Renderiza v√≠deos sem t√≠tulos
  function renderVideos(page = 1) {
    const allVideos = getFilteredVideos();
    const totalVideos = allVideos.length;
    const totalPages = Math.ceil(totalVideos / VIDEOS_PER_PAGE);

    if(page > totalPages) page = totalPages;
    if(page < 1) page = 1;
    currentPage = page;

    videosGrid.innerHTML = '';

    if(totalVideos === 0) {
      videosGrid.innerHTML = '<p style="color:#ccc; text-align:center;">Nenhum v√≠deo para mostrar.</p>';
      pagination.innerHTML = '';
      return;
    }

    const startIndex = (page -1) * VIDEOS_PER_PAGE;
    const endIndex = startIndex + VIDEOS_PER_PAGE;
    const videosToShow = allVideos.slice(startIndex, endIndex);

    videosToShow.forEach(video => {
      const card = document.createElement('div');
      card.className = 'video-card';

      const iframe = document.createElement('iframe');
      iframe.width = "320";
      iframe.height = "180";
      iframe.src = `https://www.youtube.com/embed/${video.id}`;
      iframe.frameBorder = "0";
      iframe.allow = "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture";
      iframe.allowFullscreen = true;
      card.appendChild(iframe);

      videosGrid.appendChild(card);
    });

    renderPagination(totalPages, page);
  }

  // Renderiza bot√µes de pagina√ß√£o
  function renderPagination(totalPages, currentPage) {
    pagination.innerHTML = '';

    if(totalPages <= 1) return;

    // Bot√£o anterior
    const prevBtn = document.createElement('button');
    prevBtn.textContent = 'Anterior';
    prevBtn.disabled = currentPage === 1;
    prevBtn.onclick = () => renderVideos(currentPage - 1);
    pagination.appendChild(prevBtn);

    // Bot√µes numerados (limite 5 para simplicidade)
    let startPage = Math.max(1, currentPage - 2);
    let endPage = Math.min(totalPages, startPage + 4);
    if(endPage - startPage < 4) {
      startPage = Math.max(1, endPage - 4);
    }

    for(let i = startPage; i <= endPage; i++) {
      const btn = document.createElement('button');
      btn.textContent = i;
      btn.className = i === currentPage ? 'active' : '';
      btn.onclick = () => renderVideos(i);
      pagination.appendChild(btn);
    }

    // Bot√£o pr√≥ximo
    const nextBtn = document.createElement('button');
    nextBtn.textContent = 'Pr√≥ximo';
    nextBtn.disabled = currentPage === totalPages;
    nextBtn.onclick = () => renderVideos(currentPage + 1);
    pagination.appendChild(nextBtn);
  }

  // Valida√ß√£o simplificada do YouTube URL
  function extractYouTubeID(url) {
    const regex = /(?:youtube\.com\/watch\?v=|youtu\.be\/)([\w-]{11})/;
    const match = url.match(regex);
    return match ? match[1] : null;
  }

  // Upload do v√≠deo do usu√°rio
  async function addUserVideo(video) {
    try {
      const res = await fetch(`https://www.youtube.com/oembed?url=https://www.youtube.com/watch?v=${video.id}&format=json`);
      if(!res.ok) {
        alert("V√≠deo n√£o encontrado ou indispon√≠vel.");
        return;
      }
    } catch(e) {
      alert("Erro ao verificar o v√≠deo.");
      return;
    }

    const userVideos = loadUserVideos();

    // Evitar duplicatas
    if(userVideos.some(v => v.id === video.id) || defaultVideos.some(v => v.id === video.id)) {
      alert("Este v√≠deo j√° est√° na lista.");
      return;
    }

    userVideos.push(video);
    saveUserVideos(userVideos);
    renderVideos(currentPage);
  }

  // Event Listeners
  uploadBtn.addEventListener('click', () => {
    const url = videoURLInput.value.trim();
    const id = extractYouTubeID(url);
    if(!id) {
      alert("Por favor, insira uma URL v√°lida do YouTube!");
      return;
    }
    addUserVideo({id});
    videoURLInput.value = '';
  });

  tabs.forEach(tab => {
    tab.addEventListener('click', () => {
      tabs.forEach(t => t.classList.remove('active'));
      tab.classList.add('active');
      currentTab = tab.dataset.tab;
      currentPage = 1;
      renderVideos(currentPage);
    });
  });

  // Inicializa√ß√£o
  renderVideos();

</script>
</body>
</html>
