<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>VideoHub 3.0 - Your Personal YouTube Dashboard</title>
<style>
  /* ===== Reset & basics ===== */
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0; background: #121212; color: #eee;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    overflow: hidden;
  }
  a, button {
    font-family: inherit;
  }
  button {
    cursor: pointer;
  }
  /* ===== Layout ===== */
  .app {
    display: flex; height: 100vh; width: 100vw;
  }
  aside.sidebar {
    background: #181818;
    width: 250px;
    display: flex;
    flex-direction: column;
    border-right: 2px solid #ff3c00;
    overflow-y: auto;
    padding: 20px;
  }
  main.content {
    flex-grow: 1;
    background: #1e1e1e;
    display: flex;
    flex-direction: column;
    overflow-y: auto;
  }
  header.header {
    height: 60px;
    background: #222;
    color: #ff3c00;
    display: flex;
    align-items: center;
    padding: 0 20px;
    font-weight: 700;
    font-size: 1.5rem;
    border-bottom: 2px solid #ff3c00;
  }

  /* ===== Sidebar ===== */
  .sidebar h2 {
    margin: 0 0 20px 0;
    font-weight: 700;
    color: #ff3c00;
    user-select: none;
    font-size: 1.4rem;
    text-align: center;
  }
  nav.menu {
    flex-grow: 1;
  }
  nav.menu button {
    width: 100%;
    background: transparent;
    border: none;
    padding: 12px 15px;
    color: #ccc;
    text-align: left;
    font-weight: 600;
    border-radius: 8px;
    margin-bottom: 8px;
    transition: background-color 0.3s ease;
  }
  nav.menu button:hover {
    background-color: #ff3c00;
    color: #121212;
  }
  nav.menu button.active {
    background-color: #ff3c00;
    color: #121212;
    font-weight: 900;
  }

  /* ===== Search ===== */
  .search-box {
    margin-bottom: 20px;
  }
  .search-box input[type="search"] {
    width: 100%;
    padding: 10px 15px;
    border-radius: 10px;
    border: none;
    font-size: 1rem;
    outline: none;
    transition: background-color 0.3s ease;
  }
  .search-box input[type="search"]:focus {
    background-color: #333;
    color: #fff;
  }

  /* ===== Profile Section ===== */
  .profile-section {
    border-top: 2px solid #ff3c00;
    padding-top: 20px;
  }
  .profile-avatar {
    width: 80px; height: 80px;
    border-radius: 50%;
    background: #333;
    margin: 0 auto 10px auto;
    object-fit: cover;
    border: 3px solid #ff3c00;
    cursor: pointer;
    transition: transform 0.3s ease;
  }
  .profile-avatar:hover {
    transform: scale(1.05);
  }
  .profile-name {
    text-align: center;
    font-weight: 700;
    margin-bottom: 10px;
  }
  .profile-inputs {
    display: flex;
    flex-direction: column;
    gap: 10px;
    margin-bottom: 15px;
  }
  .profile-inputs input[type="text"] {
    padding: 8px 12px;
    border-radius: 8px;
    border: none;
    font-size: 1rem;
    outline: none;
  }
  .profile-inputs input[type="file"] {
    display: none;
  }
  label[for="avatarUpload"] {
    cursor: pointer;
    text-align: center;
    display: block;
    background: #ff3c00;
    color: #121212;
    font-weight: 700;
    padding: 8px 10px;
    border-radius: 10px;
    user-select: none;
  }

  /* ===== Videos Grid ===== */
  .videos-container {
    padding: 20px;
    flex-grow: 1;
    overflow-y: auto;
  }
  .videos-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill,minmax(320px,1fr));
    gap: 18px;
  }
  .video-card {
    background: #272727;
    border-radius: 12px;
    box-shadow: 0 0 10px #ff3c00cc;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    transition: transform 0.3s ease;
  }
  .video-card:hover {
    transform: scale(1.03);
    box-shadow: 0 0 14px #ff3c00ee;
  }
  .video-thumb {
    position: relative;
    width: 100%;
    height: 180px;
    background-position: center;
    background-size: cover;
  }
  .video-thumb iframe {
    width: 100%;
    height: 180px;
    border: none;
    pointer-events: none; /* prevent accidental click on iframe */
  }
  .video-info {
    padding: 10px 15px;
    color: #eee;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
  }
  .video-title {
    font-weight: 700;
    font-size: 1.1rem;
    margin-bottom: 8px;
    user-select: text;
  }
  .video-meta {
    font-size: 0.85rem;
    color: #bbb;
    margin-bottom: 10px;
  }
  .video-actions {
    margin-top: auto;
    display: flex;
    gap: 12px;
  }
  button.action-btn {
    background: #ff3c00;
    border: none;
    border-radius: 8px;
    padding: 8px 12px;
    color: #121212;
    font-weight: 700;
    flex-grow: 1;
    transition: background-color 0.3s ease;
  }
  button.action-btn:hover {
    background-color: #e63600;
  }
  button.action-btn.disabled {
    background-color: #555;
    color: #999;
    cursor: default;
  }
  button.like-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    background: transparent;
    border: none;
    color: #ff3c00;
    font-weight: 700;
    cursor: pointer;
    user-select: none;
    transition: color 0.3s ease;
  }
  button.like-btn.liked {
    color: #ff6161;
  }
  button.like-btn:hover {
    color: #ff7f7f;
  }
  .like-icon {
    font-size: 1.2rem;
  }
  .comments-toggle {
    margin-top: 10px;
    background: transparent;
    border: none;
    color: #ff3c00;
    cursor: pointer;
    font-weight: 600;
    user-select: none;
    align-self: flex-start;
  }
  .comments-section {
    background: #1a1a1a;
    border-radius: 10px;
    margin-top: 10px;
    max-height: 200px;
    overflow-y: auto;
    padding: 8px;
  }
  .comment {
    padding: 5px 10px;
    margin-bottom: 6px;
    background: #333;
    border-radius: 8px;
    font-size: 0.9rem;
  }
  .comment strong {
    color: #ff3c00;
  }
  .comment-form {
    display: flex;
    margin-top: 8px;
    gap: 8px;
  }
  .comment-form input[type="text"] {
    flex-grow: 1;
    border-radius: 8px;
    border: none;
    padding: 6px 10px;
    font-size: 1rem;
    outline: none;
  }
  .comment-form button {
    background: #ff3c00;
    border: none;
    border-radius: 8px;
    color: #121212;
    font-weight: 700;
    padding: 8px 12px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  .comment-form button:hover {
    background-color: #e63600;
  }

  /* ===== Upload Section ===== */
  .upload-section {
    margin-top: 15px;
    padding: 15px;
    background: #222;
    border-radius: 12px;
    box-shadow: 0 0 10px #ff3c00bb;
  }
  .upload-section label {
    display: block;
    margin-bottom: 6px;
    font-weight: 700;
  }
  .upload-section input[type="url"] {
    width: 100%;
    padding: 8px 12px;
    border-radius: 8px;
    border: none;
    font-size: 1rem;
    outline: none;
  }
  .upload-section button {
    margin-top: 10px;
    width: 100%;
    background: #ff3c00;
    border: none;
    border-radius: 10px;
    color: #121212;
    font-weight: 700;
    padding: 10px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  .upload-section button:hover {
    background-color: #e63600;
  }

  /* ===== Responsive ===== */
  @media (max-width: 768px) {
    .app {
      flex-direction: column;
    }
    aside.sidebar {
      width: 100%;
      height: auto;
      border-right: none;
      border-bottom: 2px solid #ff3c00;
      padding: 10px;
      flex-direction: row;
      overflow-x: auto;
      gap: 10px;
    }
    nav.menu button {
      flex-shrink: 0;
      padding: 10px 15px;
      font-size: 0.9rem;
    }
    main.content {
      height: auto;
      flex-grow: 1;
      overflow-y: visible;
    }
    .videos-grid {
      grid-template-columns: repeat(auto-fill,minmax(280px,1fr));
      gap: 12px;
    }
  }
</style>
</head>
<body>

<div class="app">

  <aside class="sidebar">
    <h2>VideoHub</h2>

    <div class="search-box">
      <input type="search" id="searchInput" placeholder="Search videos..." autocomplete="off" />
    </div>

    <nav class="menu" aria-label="Main navigation">
      <button class="menu-btn active" data-tab="home">Home</button>
      <button class="menu-btn" data-tab="trending">Trending</button>
      <button class="menu-btn" data-tab="music">Music</button>
      <button class="menu-btn" data-tab="gaming">Gaming</button>
      <button class="menu-btn" data-tab="education">Education</button>
      <button class="menu-btn" data-tab="entertainment">Entertainment</button>
      <button class="menu-btn" data-tab="favorites">Favorites</button>
      <button class="menu-btn" data-tab="uploads">My Uploads</button>
      <button class="menu-btn" data-tab="profile">Profile</button>
    </nav>

    <section class="profile-section" aria-label="User profile settings">
      <img src="" alt="User avatar" class="profile-avatar" id="profileAvatar" tabindex="0" title="Click to change avatar" />
      <div class="profile-name" id="profileNameDisplay">Your Name</div>
      <div class="profile-inputs">
        <input type="text" id="profileNameInput" placeholder="Enter your name" maxlength="25" />
        <input type="file" id="avatarUpload" accept="image/*" />
        <label for="avatarUpload">Upload Avatar</label>
      </div>
    </section>
  </aside>

  <main class="content" role="main">
    <header class="header">VideoHub ðŸŽ¥</header>
    <section class="videos-container" id="videosContainer">
      <div class="videos-grid" id="videosGrid">
        <!-- Videos will load here -->
      </div>
    </section>
    <section class="upload-section" aria-label="Upload new video">
      <label for="videoURLInput">Add YouTube Video URL</label>
      <input type="url" id="videoURLInput" placeholder="https://www.youtube.com/watch?v=..." />
      <button id="uploadVideoBtn">Add Video</button>
    </section>
  </main>

</div>

<script>
  // === Constants and variables ===
  const VIDEOS_PER_PAGE = 9;
  let currentTab = 'home';
  let currentPage = 1;
  let allVideos = [];
  let userVideos = [];
  let favorites = [];
  let likes = {};
  let comments = {};
  let profile = { name: '', avatar: '' };
  let filteredVideos = [];

  // DOM elements
  const tabsButtons = document.querySelectorAll('.menu-btn');
  const videosGrid = document.getElementById('videosGrid');
  const searchInput = document.getElementById('searchInput');
  const videoURLInput = document.getElementById('videoURLInput');
  const uploadVideoBtn = document.getElementById('uploadVideoBtn');
  const profileNameInput = document.getElementById('profileNameInput');
  const profileNameDisplay = document.getElementById('profileNameDisplay');
  const profileAvatar = document.getElementById('profileAvatar');
  const avatarUpload = document.getElementById('avatarUpload');

  // Default videos with IDs and categories
  const defaultVideos = [
    { id: "dQw4w9WgXcQ", category: "music" },
    { id: "noLL5xy0UnU", category: "gaming" },
    { id: "6zp3mt5Dd2c", category: "education" },
    { id: "MsXdUtlDVhk", category: "entertainment" },
    { id: "tAGnKpE4NCI", category: "music" },
    { id: "3JZ_D3ELwOQ", category: "music" },
    { id: "Zi_XLOBDo_Y", category: "gaming" },
    { id: "V-_O7nl0Ii0", category: "entertainment" }
  ];

  // ======= LocalStorage keys =======
  const LS_KEYS = {
    USER_VIDEOS: 'vh_userVideos',
    FAVORITES: 'vh_favorites',
    LIKES: 'vh_likes',
    COMMENTS: 'vh_comments',
    PROFILE: 'vh_profile'
  };

  // ========== Helpers ==========

  // Save/load to localStorage
  function saveLS(key, data) {
    localStorage.setItem(key, JSON.stringify(data));
  }
  function loadLS(key, def = null) {
    const data = localStorage.getItem(key);
    if(!data) return def;
    try {
      return JSON.parse(data);
    } catch {
      return def;
    }
  }

  // Extract YouTube video ID from URL
  function extractYouTubeID(url) {
    const reg = /(?:youtube\.com\/watch\?v=|youtu\.be\/)([\w-]{11})/;
    const match = url.match(reg);
    return match ? match[1] : null;
  }

  // Fetch video info via YouTube oEmbed API (title + thumbnail)
  async function fetchVideoInfo(videoId) {
    try {
      const res = await fetch(`https://www.youtube.com/oembed?url=https://www.youtube.com/watch?v=${videoId}&format=json`);
      if (!res.ok) throw new Error('Video not found');
      const data = await res.json();
      return {
        title: data.title,
        thumbnail: `https://img.youtube.com/vi/${videoId}/hqdefault.jpg`
      };
    } catch {
      return null;
    }
  }

  // Load profile from localStorage
  function loadProfile() {
    const p = loadLS(LS_KEYS.PROFILE, {name: '', avatar: ''});
    profile = p;
    profileNameDisplay.textContent = profile.name || 'Your Name';
    profileNameInput.value = profile.name || '';
    profileAvatar.src = profile.avatar || 'https://cdn-icons-png.flaticon.com/512/149/149071.png';
  }

  // Save profile to localStorage
  function saveProfile() {
    saveLS(LS_KEYS.PROFILE, profile);
  }

  // Load user videos
  function loadUserVideos() {
    userVideos = loadLS(LS_KEYS.USER_VIDEOS, []);
  }

  // Save user videos
  function saveUserVideos() {
    saveLS(LS_KEYS.USER_VIDEOS, userVideos);
  }

  // Load favorites
  function loadFavorites() {
    favorites = loadLS(LS_KEYS.FAVORITES, []);
  }

  // Save favorites
  function saveFavorites() {
    saveLS(LS_KEYS.FAVORITES, favorites);
  }

  // Load likes
  function loadLikes() {
    likes = loadLS(LS_KEYS.LIKES, {});
  }

  // Save likes
  function saveLikes() {
    saveLS(LS_KEYS.LIKES, likes
